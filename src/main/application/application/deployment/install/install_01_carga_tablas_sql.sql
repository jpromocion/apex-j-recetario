prompt --application/deployment/install/install_01_carga_tablas_sql
begin
--   Manifest
--     INSTALL: INSTALL-01_carga_tablas.sql
--   Manifest End
wwv_flow_imp.component_begin (
 p_version_yyyy_mm_dd=>'2023.04.28'
,p_release=>'23.1.2'
,p_default_workspace_id=>7231611737995830
,p_default_application_id=>125
,p_default_id_offset=>0
,p_default_owner=>'RECETAS'
);
wwv_flow_imp_shared.create_install_script(
 p_id=>wwv_flow_imp.id(12941217332597667)
,p_install_id=>wwv_flow_imp.id(12653854535473681)
,p_name=>'01_carga_tablas.sql'
,p_sequence=>10
,p_script_type=>'INSTALL'
,p_script_clob=>wwv_flow_string.join(wwv_flow_t_varchar2(
'PROMPT Tables',
'create table MEASURE (',
'    id number generated by default on null as identity,',
'    name varchar2(500) not null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table MEASURE add constraint MEASURE_PK primary key (id);',
'alter table MEASURE add constraint MEASURE_UK unique (name);',
'',
'',
'',
'create table RECIPE (',
'    id number generated by default on null as identity,',
'    name varchar2(500) not null,',
'    personas number(2,0) null,',
'    time VARCHAR2(10) null,',
'    observation varchar2(4000) null,',
'    starrating number(2,0) null,',
'    tags varchar2(4000) null,',
'    difficulty varchar2(1) null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table RECIPE add constraint RECIPE_PK primary key (id);',
'',
'create table RECIPE_PHOTO (',
'    id number generated by default on null as identity,',
'    idrecipe number not null,',
'    photo BLOB not null,',
'    namefile varchar2(1000) not null,',
'    mimetype varchar2(500) not null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table RECIPE_PHOTO add constraint RECIPE_PHOTO_PK primary key (id);',
'alter table RECIPE_PHOTO add constraint RECIPE_PHOTO_FK foreign  key (idrecipe) references RECIPE(id);',
'',
'',
'',
'create table RECIPE_INGREDIENT (',
'    id number generated by default on null as identity,',
'    idrecipe number not null,',
'    name varchar2(100) not null,',
'    DESCRIPTION varchar2(1000) null,',
'    amount NUMBER(10,3) null,',
'    idmeasure number,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table RECIPE_INGREDIENT add constraint RECIPE_INGREDIENT_PK primary key (id);',
'alter table RECIPE_INGREDIENT add constraint RECIPE_INGREDIENT_FK foreign  key (idrecipe) references RECIPE(id);',
'alter table RECIPE_INGREDIENT add constraint RECIPE_INGREDIENT_FK2 foreign  key (idmeasure) references MEASURE(id);',
'',
'',
'create table RECIPE_STEP (',
'    id number generated by default on null as identity,',
'    idrecipe number not null,',
'    step number(2,0) not null,',
'    description varchar2(4000) not null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table RECIPE_STEP add constraint RECIPE_STEP_PK primary key (id);',
'alter table RECIPE_STEP add constraint RECIPE_STEP_FK foreign  key (idrecipe) references RECIPE(id);',
'alter table RECIPE_STEP add constraint RECIPE_STEP_UK unique (idrecipe, step);',
'',
'',
'create table CONVERTER (',
'    id number generated by default on null as identity,',
'    measure_base varchar2(500) not null,',
'    measure_destination varchar2(500) not null,',
'    ratio_to_1 number(20,10) not null,',
'    type varchar2(2) default ''L'' not null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table CONVERTER add constraint CONVERTER_PK primary key (id);',
'',
'',
'create table RECIPE_MEDIA (',
'    id number generated by default on null as identity,',
'    idrecipe number not null,',
'    type varchar2(1) not null,',
'    description varchar2(2000) null,',
'    url varchar2(2000) null,',
'    created date not null,',
'    created_by varchar2(255 char) not null,',
'    updated date not null,',
'    updated_by varchar2(255 char) not null',
');',
'',
'alter table RECIPE_MEDIA add constraint RECIPE_MEDIA_PK primary key (id);',
'alter table RECIPE_MEDIA add constraint RECIPE_MEDIA_FK foreign  key (idrecipe) references RECIPE(id);',
'alter table RECIPE_MEDIA add constraint RECIPE_MEDIA_CK check (type IN (''U'',''V''));',
'',
'',
''))
);
wwv_flow_imp.component_end;
end;
/
